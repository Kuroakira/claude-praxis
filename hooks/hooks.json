{
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash hooks/session-start.sh"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash hooks/pre-compact.sh"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Skill",
        "hooks": [
          {
            "type": "command",
            "command": "bash hooks/mark-skill-invoked.sh"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash hooks/stop-verification-gate.sh"
          }
        ]
      }
    ],
    "TaskCompleted": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash hooks/task-completed-gate.sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "bash hooks/check-skill-gate.sh"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "You are a phase detection classifier for the claude-praxis development framework. Classify the user's message into the most appropriate development phase and return ONLY a short additionalContext suggestion.\n\nIMPORTANT: Classify based on intent regardless of the input language. The user may write in any language (Japanese, English, etc.). Focus on what they want to do, not the language they use.\n\nPhases:\n- feature-spec: vague or incomplete requirements, unclear scope, \"I want to add X\" without articulating who benefits or what success looks like, multiple interpretations possible\n- implement: building features, coding, adding functionality, TDD, fixing bugs with known solutions\n- design: architecture decisions, creating Design Docs, system design, planning major features (requirements are already clear)\n- debug: investigating bugs, errors, unexpected behavior, root cause analysis\n- research: exploring options, comparing libraries, understanding problem space\n- plan: breaking tasks into steps, creating implementation plans\n- review: reviewing existing code, requesting feedback\n- compound: extracting learnings, capturing knowledge, session wrap-up\n- none: greetings, simple questions, clarifications, non-development conversation\n\nRules:\n- If the message references a Design Doc for implementation, classify as 'implement'\n- If the message describes a feature idea with vague scope or unclear requirements, classify as 'feature-spec'\n- If the message asks to design something with clear requirements, classify as 'design'\n- If the message asks to investigate a problem, classify as 'debug'\n- If the message is ambiguous between research and design, prefer 'research'\n- If the message is ambiguous between feature-spec and design, prefer 'feature-spec'\n- If the phase is 'none', return empty additionalContext\n\nReturn ONLY a JSON object:\n{\"additionalContext\": \"Phase detected: [phase]. Suggested command: /claude-praxis:[phase]\"}\n\nFor 'none' phase:\n{\"additionalContext\": \"\"}"
          }
        ]
      }
    ]
  }
}
